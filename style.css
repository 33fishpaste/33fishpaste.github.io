/* =================================================
   Global Design Tokens
   -------------------------------------------------
   Centralized variables for colors, spacing, and
   stacking contexts. Adjust here to theme the UI.
   ================================================= */
:root {
  /* Sizing */
  --sidebar-width: 260px;

  /* Palette */
  --color-bg-main: #121212;
  --color-bg-side: #212121;
  --color-bg-card: #1e1e1e;
  --color-bg-darker: #333333;
  --color-bg-darkest: #1e1e1e;
  --color-fg: #fafafa;
  --color-fg-muted: #bbbbbb;
  --color-accent: #4caf50;

  /* Borders & Radius */
  --radius-s: .4rem;
  --radius-m: .6rem;
  --radius-l: .75rem;

  /* Z‑index Layers (higher = on top) */
  --z-hamburger: 1100;
  --z-tooltip: 1200;
  --z-sidebar: 900;
}

/* =================================================
   Base & Resets
   ================================================= */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  display: flex;
  min-height: 100vh;
  background: var(--color-bg-main);
  color: var(--color-fg);
  overflow-x: hidden;
}

/* =================================================
   Layout: Hamburger Button & Sidebar
   ================================================= */
#hamburger {
  position: fixed;
  top: 1rem;
  left: 1rem;
  width: 2.25rem;
  height: 2.25rem;
  font-size: 1.8rem;
  line-height: 2.1rem;
  text-align: center;
  background: var(--color-bg-darker);
  border: none;
  border-radius: var(--radius-s);
  color: var(--color-fg);
  cursor: pointer;
  z-index: var(--z-hamburger);
}
#hamburger:active {
  background: #444;
}

/* Sidebar */
#sidebar {
  position: fixed;
  inset: 0 auto 0 0;
  width: var(--sidebar-width);
  padding-top: calc(3.5rem + 0.25rem); /* hamburger height + gap */
  background: var(--color-bg-side);
  overflow-y: auto;
  z-index: var(--z-sidebar);
  transition: transform .3s ease;
  transform: translateX(0); /* open (desktop default) */
}
#sidebar.hidden {
  transform: translateX(-100%);
}

/* Responsive behaviour */
@media (max-width: 767px) {
  #sidebar { transform: translateX(-100%); }
  body.menu-open #sidebar { transform: translateX(0); }
}
@media (min-width: 768px) {
  body.menu-open main { margin-left: var(--sidebar-width); }
}

/* =================================================
   Main Content Area
   ================================================= */
main {
  flex: 1 1 auto;
  padding: 3.5rem 1.5rem 2rem;
  overflow-y: auto;
}

/* =================================================
   Controls Bar
   ================================================= */
#controls {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
  margin-bottom: 1rem;
}
#controls input[type="text"] {
  flex: 1 1 220px;
  min-width: 140px;
}

/* =================================================
   Tables & Checklist
   ================================================= */
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1rem;
}
th,
td {
  padding: .5rem .75rem;
  border-bottom: 1px solid #333;
  vertical-align: top;
}
th {
  text-align: left;
  background: var(--color-bg-card);
}
input[type="checkbox"] {
  accent-color: var(--color-accent);
  transform: scale(1.2);
}
select,
input[type="text"],
textarea {
  background: var(--color-bg-card);
  border: 1px solid #444;
  color: var(--color-fg);
  padding: .25rem .5rem;
  border-radius: var(--radius-s);
}
textarea {
  resize: vertical;
  width: 100%;
}

/* Description rows inside checklist */
.desc-row td {
  font-size: .85rem;
  color: var(--color-fg-muted);
  white-space: pre-line;
  border-bottom: none;
}

/* =================================================
   Icon Buttons (reuse across components)
   ================================================= */
.icon-btn {
  background: none;
  border: none;
  color: var(--color-fg);
  font-size: 1.25rem;
  cursor: pointer;
}
.icon-btn:hover {
  color: var(--color-accent);
}

/* =================================================
   Build Cards (grid layout)
   ================================================= */
.build-grid { display: block; }

.build-card {
  width: 100%;
  background: var(--color-bg-card);
  padding: 1rem;
  border-radius: var(--radius-l);
  box-shadow: 0 2px 6px rgb(0 0 0 / .6);
  margin-bottom: 1rem;
  position: relative;
}

.build-header {
  font-size: 1.1rem;
  margin-bottom: .5rem;
  word-break: break-all;
}

.build-line {
  display: flex;
  gap: .5rem;
  align-items: flex-start;
  flex-wrap: wrap;
  margin: .25rem 0;
}
.build-line .desc {
  flex-basis: 100%;
  margin-left: 2rem;
  font-size: .8rem;
  color: var(--color-fg-muted);
  white-space: pre-line;
}

.note {
  margin-top: .5rem;
  font-size: .85rem;
  white-space: pre-line;
}

/* Action buttons within card */
.btn-row {
  position: absolute;
  top: .5rem;
  right: .5rem;
  display: flex;
  gap: .25rem;
}
.btn-row button {
  background: none;
  border: none;
  color: var(--color-fg);
  font-size: 1.1rem;
  cursor: pointer;
}
.btn-row button:hover { color: var(--color-accent); }

.view.hidden,
.edit.hidden { display: none; }

.form-row {
  display: flex;
  gap: .5rem;
  margin: .25rem 0;
}
.form-row label { min-width: 70px; }
.form-row input { flex: 1; }

#add-build {
  width: 100%;
  margin-top: 1rem;
  padding: .65rem 1rem;
  border: none;
  border-radius: var(--radius-m);
  background: var(--color-accent);
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
#add-build:hover { opacity: .9; }

/* =================================================
   Menu Items & Icons
   ================================================= */
.menu-item {
  padding: 1rem 1.25rem;
  cursor: pointer;
  user-select: none;
  font-size: 1rem; /* ~16px */
}

.dmg-icon {
  width: 1.1em;
  height: 1.1em;
  vertical-align: -0.15em;
}

/* =================================================
   Mobile‑only Details Checkbox
   ================================================= */
.mobile-detail { display: inline-block; }
@media (min-width: 768px) {
  .mobile-detail { display: none; }
}

/* =================================================
   Tooltip (shared component)
   ================================================= */
#tooltip {
  position: absolute;
  max-width: 260px;
  background: var(--color-bg-darker);
  color: var(--color-fg);
  padding: .75rem 1rem;
  border-radius: var(--radius-m);
  box-shadow: 0 2px 8px rgba(0, 0, 0, .75);
  font-size: .85rem;
  line-height: 1.35;
  z-index: var(--z-tooltip);
  display: none;
}
#tooltip.visible { display: block; }

.tooltip-trigger {
  text-decoration: underline dotted 1px;
  cursor: pointer;
}

/* Table‑style tooltip layout */
#tooltip table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: .5rem;
}
#tooltip td {
  padding: 2px 0;
  vertical-align: top;
}
#tooltip td.h {
  font-weight: bold;
  padding-right: .5em;
  white-space: nowrap;
}
#tooltip .desc {
  white-space: pre-line;
}

/* 補助カラムを縦並びで見せる行 */
.extra-row td {
  font-size: .85rem;
  color: var(--color-fg-muted);
  white-space: pre-line;
  border-bottom: none;
}
.extra-row .h {          /* ラベル部分を軽く強調 */
  font-weight: bold;
  margin-right: .5em;
}


.extra-row table {
  width: 100%;
  border-collapse: collapse;
}
.extra-row td {
  padding: 2px 0;
  vertical-align: top;
}
.extra-row td.h {
  font-weight: bold;
  padding-right: .5em;
  white-space: nowrap;
}

/* ── Mobile (< 768 px) 専用調整 ───────────────────── */
@media (max-width: 767px) {
  /* desc 行を extra-row と同じ位置から始める */
  .desc-row td {
    padding-left: 0px;   /* 必要に応じて 0〜4px で微調整 */
  }
}

/* ────────────────────────────────
   ① スマホ (<768 px) では検索欄を1行占有させ、
      すぐ下の行に各チェックボックスを並べる
   ────────────────────────────────*/
@media (max-width: 767px) {
  /* 検索ボックスを100%幅で固定して改行を発生させる */
  #controls input[type="text"] {
    flex: 0 0 100%;
  }
}

/* ────────────────────────────────
   ② チェックボックス列の幅を固定（PC/スマホ共通）
   ────────────────────────────────*/
table th:first-child,
table td:first-child {
  width: 44px;          /* 好みで 36–48px 程度に調整 */
  min-width: 44px;
}

/*──────────────────────────────
  RARITY COLOR MAPPING
  ──────────────────────────────*/
:root {
  --rarity-common:     #c79989;   /* お好みで変更 */
  --rarity-uncommon:   #bec0c2;
  --rarity-rare:       #fbecc4;
  --rarity-legendary:  #dfdfdf;
}

/* 行に付く .rarity‑xxx クラスで文字色を指定 */
tr.rarity-common    { color: var(--rarity-common); }
tr.rarity-uncommon  { color: var(--rarity-uncommon); }
tr.rarity-rare      { color: var(--rarity-rare); }
tr.rarity-legendary { color: var(--rarity-legendary); }
